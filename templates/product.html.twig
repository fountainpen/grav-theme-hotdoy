{% extends 'partials/base.html.twig' %}
{% block js %}
{{ parent() }}
{% do assets.addJs('theme://js/product.js', { group:'after' }) %}
{% endblock %}

{% block page_content %}
<section class="page page--product">
	<div class="product__wrapper">
		<div class="product__media" data-reveal>
			{# Swiper #}
			<div class="product__gallery swiper-container">
				<div class="swiper-wrapper">
				{% for image in page.media.images %}
					<div class="swiper-slide">
						{% include 'partials/img.html.twig' with {'image': image} %}
					</div>
				{% endfor %}
				</div>
				<div class="swiper-scrollbar"></div>
			</div>
		</div>

		<div class="product__info">
			<h1 class="product__info__title">{{ page.title }}</h1>
			<p class="product__info__description">{{ page.header.description }}</p>
			<div class="product__info__price">{{ theme.price_prefix }} {{ page.header.price|number_format(2) }} {{ theme.price_suffix }}</div>

			<div>
				{% if theme.snipcart_api_key %}
				<div class="product__info__addtocart">
					<div class="btn btn--solid">
						<a class="snipcart-add-item"
						data-item-id="{{ page.header.id }}"
						data-item-price="{{ page.header.price }}"
						data-item-url="{{ page.url }}"
						data-item-description="{{ page.header.description }}"
						data-item-image="{{ image.url }}"
						data-item-name="{{ page.title }}">Add to cart</a>
					</div>
				</div>
			
				{% else %}
		     	<div class="notices red dev"><p>Snipcart API Key not found.<br>Check theme configuration.</p></div>
				{% endif %}
				{% include 'modular/content.html.twig' with{'modular_class': 'product__info__content', 'width': 'full'} %}
			</div>
		</div>
	</div>

	{% for module in page.collection() %}
	{{ module.content }}
	{% endfor %}

</section>
{% endblock %}
