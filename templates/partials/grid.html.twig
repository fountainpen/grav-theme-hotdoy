{% set rhythm = rhythm|default(page.header.rhythm ?? 'rhythm') %}
{% set columns = columns|default(page.header.columns) %}
{% set behaviour = behaviour|default(page.header.behaviour) %}
{% set bg_color = grid_bg_color|default(page.header.bg_color) %}
{% set item_border = item_border|default(page.header.item_border) %}
{% set item_padding = item_padding|default(page.header.item_padding) %}
{% set item_bg_color = item_bg_color|default(page.header.item_bg_color) %}
{% set item_fg_color = item_fg_color|default(page.header.item_fg_color) %}
{% set item_bg_color_alt = item_bg_color_alt|default(page.header.item_bg_color_alt) %}
{% set item_fg_color_alt = item_fg_color_alt|default(page.header.item_fg_color_alt) %}

{% set modular_classes = 'modular modular--grid ' ~ rhythm ~ (bg_color ? ' rhythm-padding' : '') %}

{% set modular_styles %}
{% if bg_color %}--bg-color:{{ bg_color }};{% endif %}
{% endset %}

{% set items_styles %}
{% if item_border %}--border:{{ item_border }};{% endif %}
{% if item_padding %}--padding:{{ item_padding }};{% endif %}
{% if item_bg_color %}--bg-color:{{ item_bg_color }};{% endif %}
{% if item_fg_color %}--fg-color:{{ item_fg_color }};{% endif %}
{% if item_fg_color_alt %}--fg-color-alt:{{ item_fg_color_alt }};{% endif %}
{% if item_bg_color_alt %}--bg-color-alt:{{ item_bg_color_alt }};{% endif %}
{% endset %}

<section class="{{ modular_classes }}" {% if computed_style %}style="{{ modular_styles }}"{% endif %}>
	<div class="grid site {{ behaviour }}" tcolumns="{{ columns }}" style="{{ items_styles }}">
		{% for page in page.collection() %}
			{{ page.content }}
		{% endfor %}
	</div>
</section>
